<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models/movable-object.class.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models/movable-object.class.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Extends {@link DrawableObject} with additional properties and methods for motion,
 * gravity, collision detection, and animation handling.
 *
 * @extends DrawableObject
 */
class MovableObject extends DrawableObject {
    
    /**
     * The current horizontal speed of the object.
     * @type {number}
     * @default 6
     */
    speed = 6;


    /**
     * Indicates the direction the object is currently facing.
     * When true, the object is facing right.
     * @type {boolean}
     * @default true
     */
    otherDirection = true;


    /**
     * A static flag to indicate the direction for throwing objects.
     * When true, objects will be thrown to the right.
     * @type {boolean}
     * @static
     * @default false
     */
    static throwOtherDirection = false;


    /**
     * The current vertical speed of the object, used for jumping or falling.
     * @type {number}
     * @default 0
     */
    speedY = 0;


    /**
     * The amount by which {@link speedY} decreases over time, simulating gravity.
     * @type {number}
     * @default 1
     */
    acceleration = 1;


    /**
     * A timestamp (in milliseconds) of the last time the object was hit,
     * used for determining if the object is still in a "hurt" state.
     * @type {number}
     * @default 0
     */
    lastHit = 0;


    /**
     * Holds the last displayed animation frame index for certain animations.
     * @type {number}
     * @default 0
     */
    currentImageLastPic = 0;


    /**
     * A timestamp (in milliseconds) of the last animation frame, used for
     * controlling animation frame rates in {@link playsTimedAnimation}.
     * @type {number}
     * @default 0
     */
    lastFrameTime = 0;


    /**
     * The index of the current image frame for animations.
     * @type {number}
     * @default 0
     */
    currentImage = 0;


    /**
     * Sets the static {@link throwOtherDirection} property, determining the
     * direction in which objects are thrown.
     *
     * @function setThrowOtherDirection
     * @param {boolean} boolean - If true, objects will be thrown to the right; if false, to the left.
     * @returns {void} No return value.
     */
    setThrowOtherDirection(boolean) {
        MovableObject.throwOtherDirection = boolean;
    }


    /**
     * Applies gravity to the object by adjusting its vertical position (y-coordinate)
     * and reducing its vertical speed over time, simulating a gravitational pull.
     * Continues while the object is above the ground or still moving upward.
     *
     * @function applyGravity
     * @returns {void} No return value.
     */
    applyGravity() {
        setStoppableIverval(() => {
            if (this.isAboveGround() || this.speedY > 0) {
                this.y -= this.speedY;
                this.speedY -= this.acceleration;
            }
        }, 1000 / 25);
    }


    /**
     * Determines if the object is above the ground. If the object is a {@link ThrowableObject},
     * uses a different y-threshold for ground level.
     *
     * @function isAboveGround
     * @returns {boolean} True if the object is above the ground; otherwise false.
     */
    isAboveGround() {
        if (this instanceof ThrowableObject) {
            return this.y &lt; 358;
        } else {
            return this.y &lt; 310;
        }
    }


    /**
     * Checks if this object is colliding with another object based on their
     * respective collision boxes.
     *
     * @function isColliding
     * @param {MovableObject} obj - Another object to check for collision.
     * @returns {boolean} True if the objects are colliding; otherwise false.
     */
    isColliding(obj) {
        let thisLeft = this.x + this.collisionBoxOffsetX;
        let thisTop = this.y + this.collisionBoxOffsetY;
        let thisRight = thisLeft + this.collisionBoxWidth;
        let thisBottom = thisTop + this.collisionBoxHeight;
        let objLeft = obj.x + obj.collisionBoxOffsetX;
        let objTop = obj.y + obj.collisionBoxOffsetY;
        let objRight = objLeft + obj.collisionBoxWidth;
        let objBottom = objTop + obj.collisionBoxHeight;
        return (
            thisRight >= objLeft &amp;&amp;
            thisLeft &lt;= objRight &amp;&amp;
            thisBottom >= objTop &amp;&amp;
            thisTop &lt;= objBottom
        );
    }


    /**
     * Reduces this object's life points by the specified damage amount.
     * If life points drop below zero, they are set to zero. Otherwise, updates
     * the {@link lastHit} timestamp.
     *
     * @function hit
     * @param {number} damage - The amount of damage inflicted on this object.
     * @returns {void} No return value.
     */
    hit(damage) {
        this.lifePoints -= damage;
        if (this.lifePoints &lt; 0) {
            this.lifePoints = 0;
        } else {
            this.lastHit = new Date().getTime();
        }
    }


    /**
     * Checks if this object is still in a "hurt" state by comparing the current
     * time to the {@link lastHit} timestamp.
     *
     * @function isHurt
     * @returns {boolean} True if the object is in a hurt state; otherwise false.
     */
    isHurt() {
        let timepassed = new Date().getTime() - this.lastHit;
        timepassed = timepassed / 1000;
        return timepassed &lt; 0.777;
    }


    /**
     * Checks if this object's life points have dropped to zero.
     *
     * @function isDead
     * @returns {boolean} True if life points are zero; otherwise false.
     */
    isDead() {
        return this.lifePoints == 0;
    }


    /**
     * Plays an animation by cycling through an array of images. Uses the
     * {@link currentImage} index to determine which image to display next.
     *
     * @function playAnimation
     * @param {string[]} images - An array of image paths to cycle through.
     * @returns {void} No return value.
     */
    playAnimation(images) {
        let index = this.currentImage % images.length;
        let path = images[index];
        this.img = this.imageCache[path];
        this.currentImage++;
    }


    /**
     * Plays an animation once by cycling through an array of images up to
     * the final image. Once the last image is reached, it remains displayed.
     *
     * @function playAnimationOneTime
     * @param {string[]} images - An array of image paths for the one-time animation.
     * @returns {void} No return value.
     */
    playAnimationOneTime(images) {
        if (this.currentImage &lt; images.length - 1) {
            let path = images[this.currentImage];
            this.img = this.imageCache[path];
            this.currentImage++;
        } else {
            let path = images[images.length - 1];
            this.img = this.imageCache[path];
        }
    }


    /**
     * Plays a timed animation by cycling through an array of images at intervals
     * determined by a specified speed. The function checks the time elapsed since
     * the last frame, and only advances the animation if enough time has passed.
     *
     * @function playsTimedAnimation
     * @param {string[]} images - An array of image paths for the animation frames.
     * @param {string} animationKey - A key referencing the animation's speed in {@link animationSpeeds}.
     * @returns {void} No return value.
     */
    playsTimedAnimation(images, animationKey) {
        let speed = this.animationSpeeds[animationKey];
        let now = Date.now();

        if (now - this.lastFrameTime > speed) {
            this.lastFrameTime = now;
            
            let index = this.currentImage % images.length;
            let path = images[index];
            this.img = this.imageCache[path];
            this.currentImage++;
        }
    }


    /**
     * Moves the object to the right by adding {@link speed} to its x-coordinate.
     *
     * @function moveRight
     * @returns {void} No return value.
     */
    moveRight() {
        this.x += this.speed;
    }


    /**
     * Moves the object to the left by subtracting {@link speed} from its x-coordinate.
     *
     * @function moveLeft
     * @returns {void} No return value.
     */
    moveLeft() {
        this.x -= this.speed;
    }



}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BackgroundObject.html">BackgroundObject</a></li><li><a href="BossStatusBar.html">BossStatusBar</a></li><li><a href="BrainAlien.html">BrainAlien</a></li><li><a href="Character.html">Character</a></li><li><a href="Cloud.html">Cloud</a></li><li><a href="CollectedGrenades.html">CollectedGrenades</a></li><li><a href="CollectedPistolAmmunition.html">CollectedPistolAmmunition</a></li><li><a href="DrawableObject.html">DrawableObject</a></li><li><a href="Endboss.html">Endboss</a></li><li><a href="Explosion.html">Explosion</a></li><li><a href="GreenAlien.html">GreenAlien</a></li><li><a href="GrenadeAmmunition.html">GrenadeAmmunition</a></li><li><a href="Health.html">Health</a></li><li><a href="Keyboard.html">Keyboard</a></li><li><a href="Level.html">Level</a></li><li><a href="MovableObject.html">MovableObject</a></li><li><a href="PistolAmmunition.html">PistolAmmunition</a></li><li><a href="ShootableObject.html">ShootableObject</a></li><li><a href="StatusBar.html">StatusBar</a></li><li><a href="ThrowableObject.html">ThrowableObject</a></li><li><a href="Ufo.html">Ufo</a></li><li><a href="World.html">World</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ALIEN_HURT_SOUND">ALIEN_HURT_SOUND</a></li><li><a href="global.html#BOSS_ALERT_SOUND">BOSS_ALERT_SOUND</a></li><li><a href="global.html#GAME_SOUND">GAME_SOUND</a></li><li><a href="global.html#PICK_UP_PISTOL_AMMO_SOUND">PICK_UP_PISTOL_AMMO_SOUND</a></li><li><a href="global.html#SHOOT_SOUND">SHOOT_SOUND</a></li><li><a href="global.html#WALK_SOUND">WALK_SOUND</a></li><li><a href="global.html#animate">animate</a></li><li><a href="global.html#applyGravity">applyGravity</a></li><li><a href="global.html#autoFullscreenForMobile">autoFullscreenForMobile</a></li><li><a href="global.html#changeMuteIcon">changeMuteIcon</a></li><li><a href="global.html#clearAllIntervals">clearAllIntervals</a></li><li><a href="global.html#closeWindow">closeWindow</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#drawFrameCollisionBox">drawFrameCollisionBox</a></li><li><a href="global.html#drawFrameOutside">drawFrameOutside</a></li><li><a href="global.html#explode">explode</a></li><li><a href="global.html#fullscreen">fullscreen</a></li><li><a href="global.html#hit">hit</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initLevel">initLevel</a></li><li><a href="global.html#isAboveGround">isAboveGround</a></li><li><a href="global.html#isColliding">isColliding</a></li><li><a href="global.html#isDead">isDead</a></li><li><a href="global.html#isHurt">isHurt</a></li><li><a href="global.html#loadImage">loadImage</a></li><li><a href="global.html#loadImages">loadImages</a></li><li><a href="global.html#loadSoundStatus">loadSoundStatus</a></li><li><a href="global.html#moveLeft">moveLeft</a></li><li><a href="global.html#moveRight">moveRight</a></li><li><a href="global.html#muteSound">muteSound</a></li><li><a href="global.html#playAnimation">playAnimation</a></li><li><a href="global.html#playAnimationOneTime">playAnimationOneTime</a></li><li><a href="global.html#playSound">playSound</a></li><li><a href="global.html#playsTimedAnimation">playsTimedAnimation</a></li><li><a href="global.html#removeItem">removeItem</a></li><li><a href="global.html#resolveImageIndex">resolveImageIndex</a></li><li><a href="global.html#restartGame">restartGame</a></li><li><a href="global.html#setAllSoundsMuted">setAllSoundsMuted</a></li><li><a href="global.html#setPercentage">setPercentage</a></li><li><a href="global.html#setRandomSpeed">setRandomSpeed</a></li><li><a href="global.html#setStoppableIverval">setStoppableIverval</a></li><li><a href="global.html#setThrowOtherDirection">setThrowOtherDirection</a></li><li><a href="global.html#startGame">startGame</a></li><li><a href="global.html#throw">throw</a></li><li><a href="global.html#throwAndAnimateGrenade">throwAndAnimateGrenade</a></li><li><a href="global.html#toggleControlInfo">toggleControlInfo</a></li><li><a href="global.html#toggleImpressum">toggleImpressum</a></li><li><a href="global.html#toggleMute">toggleMute</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sat Mar 01 2025 18:51:18 GMT+0100 (Mitteleuropäische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
